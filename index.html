  <!DOCTYPE html>
<html lang="sw" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Fundy Gold | Salehe Shabani</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #f8fafc; }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); }
        .step-view { display: none; animation: slideIn 0.4s ease-out forwards; }
        .step-active { display: block; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        
        select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236366f1'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 1rem center; background-size: 1.5em; }
    </style>
</head>
<body class="max-w-md mx-auto min-h-screen shadow-2xl bg-white relative">

    <!-- 1. REGISTRATION / ONBOARDING FLOW -->
    <div id="registrationFlow" class="fixed inset-0 z-[1000] bg-white p-8 overflow-y-auto">
        
        <!-- Header -->
        <div class="mb-10 text-center">
            <h1 class="text-3xl font-black italic tracking-tighter">FUNDY<span class="text-indigo-600">.</span></h1>
            <div class="flex justify-center gap-2 mt-4">
                <div id="dot1" class="w-8 h-2 rounded-full bg-indigo-600"></div>
                <div id="dot2" class="w-2 h-2 rounded-full bg-slate-200"></div>
                <div id="dot3" class="w-2 h-2 rounded-full bg-slate-200"></div>
            </div>
        </div>

        <!-- STEP 1: Aina ya Mtumiaji -->
        <div id="step1" class="step-view step-active">
            <h2 class="text-2xl font-extrabold text-slate-900 mb-2">Karibu, wewe ni nani?</h2>
            <p class="text-slate-500 text-sm mb-8">Chagua aina ya akaunti unayohitaji kuanza nayo.</p>
            
            <div class="space-y-4">
                <button onclick="setRole('mteja')" class="w-full p-6 rounded-3xl border-2 border-slate-100 hover:border-indigo-600 hover:bg-indigo-50 transition-all text-left group">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-indigo-100 text-indigo-600 rounded-2xl flex items-center justify-center text-xl">
                            <i class="fas fa-search"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-slate-800">Natafuta Fundi</h4>
                            <p class="text-xs text-slate-500">Mimi ni mteja nahitaji huduma</p>
                        </div>
                    </div>
                </button>
                <button onclick="setRole('fundi')" class="w-full p-6 rounded-3xl border-2 border-slate-100 hover:border-indigo-600 hover:bg-indigo-50 transition-all text-left group">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-emerald-100 text-emerald-600 rounded-2xl flex items-center justify-center text-xl">
                            <i class="fas fa-tools"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-slate-800">Mimi ni Fundi</h4>
                            <p class="text-xs text-slate-500">Natoa huduma za ufundi</p>
                        </div>
                    </div>
                </button>
            </div>
        </div>

        <!-- STEP 2: Taarifa Binafsi -->
        <div id="step2" class="step-view">
            <h2 class="text-2xl font-extrabold text-slate-900 mb-2">Taarifa Binafsi</h2>
            <p class="text-slate-500 text-sm mb-8">Tunaomba taarifa zako kulingana na vitambulisho vyako.</p>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-[10px] font-black uppercase text-slate-400 mb-1 ml-1">Majina Matatu (Kama yalivyo NIDA)</label>
                    <input type="text" id="fullName" placeholder="Mfano: Salehe Shabani Omary" class="w-full p-4 rounded-2xl bg-slate-50 border-none outline-none focus:ring-2 focus:ring-indigo-600 font-bold">
                </div>
                <div>
                    <label class="block text-[10px] font-black uppercase text-slate-400 mb-1 ml-1">Namba ya NIDA (Namba 20)</label>
                    <input type="number" id="nidaNumber" placeholder="199XXXXXXXXXXXXXXX" class="w-full p-4 rounded-2xl bg-slate-50 border-none outline-none focus:ring-2 focus:ring-indigo-600 font-bold">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-[10px] font-black uppercase text-slate-400 mb-1 ml-1">Jinsia</label>
                        <select id="gender" class="w-full p-4 rounded-2xl bg-slate-50 border-none outline-none focus:ring-2 focus:ring-indigo-600 font-bold">
                            <option value="">Chagua...</option>
                            <option value="Male">Mume</option>
                            <option value="Female">Mke</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-[10px] font-black uppercase text-slate-400 mb-1 ml-1">Mkoa</label>
                        <select id="region" class="w-full p-4 rounded-2xl bg-slate-50 border-none outline-none focus:ring-2 focus:ring-indigo-600 font-bold">
                            <option value="">Chagua Mkoa...</option>
                            <!-- Mikoa yote 31 ya Tanzania -->
                            <option value="Arusha">Arusha</option><option value="Dar es Salaam">Dar es Salaam</option><option value="Dodoma">Dodoma</option>
                            <option value="Geita">Geita</option><option value="Iringa">Iringa</option><option value="Kagera">Kagera</option>
                            <option value="Katavi">Katavi</option><option value="Kigoma">Kigoma</option><option value="Kilimanjaro">Kilimanjaro</option>
                            <option value="Lindi">Lindi</option><option value="Manyara">Manyara</option><option value="Mara">Mara</option>
                            <option value="Mbeya">Mbeya</option><option value="Morogoro">Morogoro</option><option value="Mtwara">Mtwara</option>
                            <option value="Mwanza">Mwanza</option><option value="Njombe">Njombe</option><option value="Pwani">Pwani</option>
                            <option value="Rukwa">Rukwa</option><option value="Ruvuma">Ruvuma</option><option value="Shinyanga">Shinyanga</option>
                            <option value="Simiyu">Simiyu</option><option value="Singida">Singida</option><option value="Songwe">Songwe</option>
                            <option value="Tabora">Tabora</option><option value="Tanga">Tanga</option><option value="Zanzibar North">Zanzibar North</option>
                            <option value="Zanzibar South">Zanzibar South</option><option value="Zanzibar Urban">Zanzibar Urban</option>
                        </select>
                    </div>
                </div>
                <button onclick="goToStep(3)" class="w-full py-5 bg-indigo-600 text-white rounded-2xl font-black mt-4 shadow-xl shadow-indigo-100">ENDELEA</button>
            </div>
        </div>

        <!-- STEP 3: Masharti & Kukamilisha -->
        <div id="step3" class="step-view">
            <h2 class="text-2xl font-extrabold text-slate-900 mb-2">Vigezo na Masharti</h2>
            <div class="p-6 bg-slate-50 rounded-3xl h-64 overflow-y-auto text-xs text-slate-600 mb-6 leading-relaxed">
                <p class="font-bold mb-4 text-slate-800">1. Usalama na Uaminifu</p>
                Maelezo yote ya NIDA lazima yawe sahihi. Fundy itahakiki kila taarifa na ikigundulika ni udanganyifu, akaunti itafungwa moja kwa moja.
                <p class="font-bold my-4 text-slate-800">2. Malipo</p>
                Malipo yatafanyika moja kwa moja kwa fundi baada ya kazi kukamilika. Fundy haihusiki na upotevu wa fedha nje ya mfumo.
                <p class="font-bold my-4 text-slate-800">3. Nidhamu</p>
                Lugha chafu kwa fundi au mteja haziruhusiwi.
            </div>
            
            <label class="flex items-center gap-3 mb-8 cursor-pointer group">
                <input type="checkbox" id="termsCheck" class="w-6 h-6 rounded-lg text-indigo-600 border-2 border-slate-200 focus:ring-0">
                <span class="text-sm font-bold text-slate-700">Nimekubali vigezo vyote vya Fundy.</span>
            </label>

            <button onclick="finishRegistration()" class="w-full py-5 bg-indigo-600 text-white rounded-2xl font-black shadow-xl shadow-indigo-100">ANZA KUTUMIA APP</button>
        </div>
    </div>

    <!-- 2. MAIN APP CONTENT -->
    <div id="mainApp" class="hidden opacity-0 transition-opacity duration-1000">
        <!-- Header -->
        <header class="p-6 pt-12 flex justify-between items-center bg-white sticky top-0 z-50">
            <div>
                <p id="roleLabel" class="text-[10px] font-black text-indigo-600 uppercase tracking-widest"></p>
                <h1 id="userDisplayName" class="text-xl font-extrabold text-slate-900"></h1>
            </div>
            <div class="flex items-center gap-3">
                <div id="userLocation" class="text-right">
                    <p class="text-[8px] font-black text-slate-400 uppercase leading-none">Mkoa</p>
                    <p id="displayRegion" class="text-xs font-bold text-slate-700"></p>
                </div>
                <div class="w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 border-2 border-white shadow-sm">
                    <i class="fas fa-user-circle text-2xl"></i>
                </div>
            </div>
        </header>

        <!-- Dynamic Content Area -->
        <main id="appContent" class="px-6 pb-32">
            <!-- Hapa pamebadilika kulingana na ROLE -->
        </main>

        <!-- Floating Chat Button -->
        <button onclick="openChat()" class="fixed right-6 bottom-24 w-16 h-16 bg-indigo-600 text-white rounded-full shadow-2xl flex items-center justify-center z-50 hover:scale-110 transition-transform">
            <i class="fas fa-comment-dots text-2xl"></i>
            <span class="absolute top-0 right-0 w-5 h-5 bg-red-500 border-2 border-white rounded-full text-[10px] flex items-center justify-center font-bold">1</span>
        </button>

        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white/95 backdrop-blur-md border-t border-slate-50 p-6 flex justify-around items-center z-40">
            <button class="text-indigo-600"><i class="fas fa-house-chimney text-xl"></i></button>
            <button class="text-slate-300"><i class="fas fa-briefcase text-xl"></i></button>
            <button class="text-slate-300"><i class="fas fa-bell text-xl"></i></button>
            <button class="text-slate-300" onclick="location.reload()"><i class="fas fa-sign-out-alt text-xl"></i></button>
        </nav>
    </div>

    <!-- Chat Modal UI -->
    <div id="chatModal" class="fixed inset-0 z-[2000] bg-white hidden flex-col">
        <header class="p-6 border-b border-slate-50 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <button onclick="closeChat()"><i class="fas fa-arrow-left text-slate-800 text-xl"></i></button>
                <div>
                    <h3 class="font-black text-slate-900">Fundy Support</h3>
                    <p class="text-[10px] text-emerald-500 font-bold uppercase">Maongezi na Salehe</p>
                </div>
            </div>
            <i class="fas fa-shield-halved text-indigo-600 text-xl"></i>
        </header>
        <div id="chatBox" class="flex-1 p-6 overflow-y-auto space-y-4 bg-slate-50">
            <div class="flex flex-col items-center my-10 text-center opacity-50">
                <i class="fas fa-lock mb-2"></i>
                <p class="text-[10px] font-bold uppercase tracking-widest">Maongezi haya yamelindwa na Salehe Encryption (E2EE)</p>
            </div>
        </div>
        <div class="p-6 bg-white border-t border-slate-50 flex gap-3">
            <input type="text" id="chatInput" placeholder="Andika ujumbe..." class="flex-1 p-4 bg-slate-100 rounded-2xl outline-none border-none font-bold">
            <button onclick="sendChatMessage()" class="w-14 h-14 bg-indigo-600 text-white rounded-2xl flex items-center justify-center shadow-lg"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        let userData = {
            role: '',
            name: '',
            nida: '',
            gender: '',
            region: ''
        };

        function goToStep(step) {
            // Validation kwa Step 2
            if(step === 3) {
                const name = document.getElementById('fullName').value;
                const nida = document.getElementById('nidaNumber').value;
                const gender = document.getElementById('gender').value;
                const region = document.getElementById('region').value;

                if(!name || nida.length < 5 || !gender || !region) {
                    alert("Tafadhali jaza taarifa zote kwa usahihi!");
                    return;
                }
                userData.name = name;
                userData.nida = nida;
                userData.gender = gender;
                userData.region = region;
            }

            document.querySelectorAll('.step-view').forEach(s => s.classList.remove('step-active'));
            document.getElementById('step' + step).classList.add('step-active');
            
            // Progress Dots
            for(let i=1; i<=3; i++) {
                document.getElementById('dot' + i).className = i <= step ? 'w-8 h-2 rounded-full bg-indigo-600 transition-all' : 'w-2 h-2 rounded-full bg-slate-200 transition-all';
            }
        }

        function setRole(role) {
            userData.role = role;
            goToStep(2);
        }

        function finishRegistration() {
            if(!document.getElementById('termsCheck').checked) {
                alert("Tafadhali kubali vigezo!");
                return;
            }

            document.getElementById('registrationFlow').style.display = 'none';
            const mainApp = document.getElementById('mainApp');
            mainApp.classList.remove('hidden');
            setTimeout(() => mainApp.style.opacity = '1', 50);

            // Set User Interface
            document.getElementById('userDisplayName').innerText = userData.name.split(' ')[0] + " " + userData.name.split(' ')[1];
            document.getElementById('displayRegion').innerText = userData.region;
            
            const roleLabel = document.getElementById('roleLabel');
            const content = document.getElementById('appContent');

            if(userData.role === 'fundi') {
                roleLabel.innerText = "Akaunti ya Fundi";
                content.innerHTML = `
                    <div class="bg-emerald-600 p-8 rounded-[3rem] text-white shadow-xl shadow-emerald-100 mb-8 relative overflow-hidden">
                        <h2 class="text-3xl font-black mb-2 italic">Karibu Fundi!</h2>
                        <p class="text-xs opacity-90 font-bold uppercase tracking-widest">Dashibodi ya Kazi - ${userData.region}</p>
                        <i class="fas fa-hammer absolute -right-4 -bottom-4 text-9xl opacity-10"></i>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="p-6 bg-white border border-slate-100 rounded-3xl shadow-sm text-center">
                            <h4 class="text-2xl font-black text-slate-800">0</h4>
                            <p class="text-[9px] font-black uppercase text-slate-400">Kazi Mpya</p>
                        </div>
                        <div class="p-6 bg-white border border-slate-100 rounded-3xl shadow-sm text-center">
                            <h4 class="text-2xl font-black text-slate-800">4.9</h4>
                            <p class="text-[9px] font-black uppercase text-slate-400">Rating Yako</p>
                        </div>
                    </div>
                    <div class="mt-8 p-6 bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200 text-center">
                        <p class="text-slate-400 font-bold text-sm">Hakuna kazi mpya kwa sasa hapa ${userData.region}. Subiri wateja wakucheki.</p>
                    </div>
                `;
            } else {
                roleLabel.innerText = "Natafuta Huduma";
                content.innerHTML = `
                    <div class="bg-indigo-600 p-8 rounded-[3rem] text-white shadow-xl shadow-indigo-100 mb-8 relative overflow-hidden">
                        <h2 class="text-3xl font-black mb-2 italic">Karibu Salehe!</h2>
                        <p class="text-xs opacity-90 font-bold uppercase tracking-widest">Tafuta fundi bora ${userData.region}</p>
                        <i class="fas fa-search-location absolute -right-4 -bottom-4 text-9xl opacity-10"></i>
                    </div>
                    <h3 class="font-black text-slate-800 text-xs uppercase tracking-widest mb-4">Sekta Maarufu</h3>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="bg-slate-50 p-4 rounded-3xl flex flex-col items-center gap-2">
                            <i class="fas fa-bolt text-indigo-600"></i>
                            <span class="text-[9px] font-black">UMEME</span>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-3xl flex flex-col items-center gap-2">
                            <i class="fas fa-faucet text-indigo-600"></i>
                            <span class="text-[9px] font-black">BOMBA</span>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-3xl flex flex-col items-center gap-2">
                            <i class="fas fa-mobile-alt text-indigo-600"></i>
                            <span class="text-[9px] font-black">SIMU</span>
                        </div>
                    </div>
                `;
            }

            // Welcome Message
            setTimeout(() => {
                const msg = userData.role === 'fundi' ? 
                    `Karibu sana Fundi ${userData.name}! Soko la ${userData.region} limefunguliwa kwa ajili yako.` :
                    `Habari ${userData.name}! Tumekupata ukiwa ${userData.region}. Unahitaji fundi gani leo?`;
                addReceivedMessage(msg);
            }, 2000);
        }

        // Chat Logic
        function openChat() { document.getElementById('chatModal').classList.replace('hidden', 'flex'); }
        function closeChat() { document.getElementById('chatModal').classList.replace('flex', 'hidden'); }

        function addReceivedMessage(msg) {
            const chatBox = document.getElementById('chatBox');
            chatBox.innerHTML += `
                <div class="flex justify-start">
                    <div class="bg-white p-4 rounded-2xl rounded-bl-none shadow-sm max-w-[80%] border border-slate-100">
                        <p class="text-sm font-bold text-slate-800">${msg}</p>
                        <p class="text-[8px] text-slate-400 mt-1 uppercase font-bold">Punde hivi</p>
                    </div>
                </div>
            `;
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            if(!input.value) return;
            const chatBox = document.getElementById('chatBox');
            chatBox.innerHTML += `
                <div class="flex justify-end">
                    <div class="bg-indigo-600 p-4 rounded-2xl rounded-br-none shadow-lg max-w-[80%]">
                        <p class="text-sm font-bold text-white">${input.value}</p>
                    </div>
                </div>
            `;
            input.value = "";
            chatBox.scrollTop = chatBox.scrollHeight;
            
            setTimeout(() => {
                addReceivedMessage("Sawa boss, nimekupata. Ngoja nicheki mfumo mkuu hapa " + userData.region);
            }, 1000);
        }
    </script>
</body>
                                </html>              
